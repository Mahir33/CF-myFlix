<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Documentation</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>myFlix API Documentation</h1>
  
  <h2>Middleware</h2>
  <p>The application uses the following middleware:</p>
  <ul>
    <li><strong>body-parser</strong>: Parses incoming request bodies in a middleware before your handlers, available under the `req.body` property.</li>
    <li><strong>express</strong>: A minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications.</li>
    <li><strong>morgan</strong>: HTTP request logger middleware for Node.js.</li>
    <li><strong>cors</strong>: Middleware to enable Cross-Origin Resource Sharing (CORS).</li>
    <li><strong>passport</strong>: Middleware for authentication in Node.js applications.</li>
  </ul>

  <h2>Endpoints</h2>

  <h3>Register a new user</h3>
  <p><strong>POST /users</strong></p>
  <p>Registers a new user.</p>
  <pre>
    Request Body:
    {
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date"
    }
  </pre>
  <pre>
    Response:
    {
      "_id": "string",
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date"
    }
  </pre>

  <h3>Login</h3>
  <p><strong>POST /login</strong></p>
  <p>Logs in a user and returns a JWT token.</p>
  <pre>
    Request Body:
    {
      "Username": "string",
      "Password": "string"
    }
  </pre>
  <pre>
    Response:
    {
      "user": {
        "_id": "string",
        "Username": "string",
        "Email": "string",
        "Birthday": "date"
      },
      "token": "string"
    }
  </pre>

  <h2>Movies</h2>
  <p>All endpoints related to movies.</p>

  <h3>Get all movies</h3>
  <p><strong>GET /movies</strong></p>
  <p>Returns a list of all movies.</p>
  <pre>
    Response:
    [
      {
        "_id": "string",
        "Title": "string",
        "Description": "string",
        "Genre": {
          "Name": "string",
          "Description": "string"
        },
        "Director": {
          "Name": "string",
          "Bio": "string",
          "Birth": "date",
          "Death": "date"
        },
        "Actors": ["string"],
        "ImagePath": "string",
        "Featured": "boolean"
      }
    ]
  </pre>

  <h3>Get a movie by title</h3>
  <p><strong>GET /movies/:Title</strong></p>
  <p>Returns data about a single movie by title.</p>
  <pre>
    Response:
    {
      "_id": "string",
      "Title": "string",
      "Description": "string",
      "Genre": {
        "Name": "string",
        "Description": "string"
      },
      "Director": {
        "Name": "string",
        "Bio": "string",
        "Birth": "date",
        "Death": "date"
      },
      "Actors": ["string"],
      "ImagePath": "string",
      "Featured": "boolean"
    }
  </pre>

  <h3>Get genre by name</h3>
  <p><strong>GET /genres/:Name</strong></p>
  <p>Returns data about a genre by name.</p>
  <pre>
    Response:
    {
      "Name": "string",
      "Description": "string"
    }
  </pre>

  <h3>Get director by name</h3>
  <p><strong>GET /directors/:Name</strong></p>
  <p>Returns data about a director by name.</p>
  <pre>
    Response:
    {
      "Name": "string",
      "Bio": "string",
      "Birth": "date",
      "Death": "date"
    }
  </pre>

  <h2>Users</h2>
  <p>All endpoints related to users.</p>

  <h3>Get all users</h3>
  <p><strong>GET /users</strong></p>
  <p>Returns a list of all users.</p>
  <pre>
    Response:
    [
      {
        "_id": "string",
        "Username": "string",
        "Password": "string",
        "Email": "string",
        "Birthday": "date"
      }
    ]
  </pre>

  <h3>Get a user by username</h3>
  <p><strong>GET /users/:Username</strong></p>
  <p>Returns data about a single user by username.</p>
  <pre>
    Response:
    {
      "_id": "string",
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date"
    }
  </pre>

  <h3>Update a user's info</h3>
  <p><strong>PUT /users/:Username</strong></p>
  <p>Updates the data of a user by username.</p>
  <pre>
    Request Body:
    {
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date"
    }
  </pre>
  <pre>
    Response:
    {
      "_id": "string",
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date"
    }
  </pre>

  <h3>Add a movie to a user's list of favorites</h3>
  <p><strong>POST /users/:Username/movies/:MovieID</strong></p>
  <p>Adds a movie to a user's list of favorite movies.</p>
  <pre>
    Response:
    {
      "_id": "string",
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date",
      "FavoriteMovies": ["string"]
    }
  </pre>

  <h3>Remove a movie from a user's list of favorites</h3>
  <p><strong>DELETE /users/:Username/movies/:MovieID</strong></p>
  <p>Removes a movie from a user's list of favorite movies.</p>
  <pre>
    Response:
    {
      "_id": "string",
      "Username": "string",
      "Password": "string",
      "Email": "string",
      "Birthday": "date",
      "FavoriteMovies": ["string"]
    }
  </pre>

  <h3>Delete a user</h3>
  <p><strong>DELETE /users/:Username</strong></p>
  <p>Deletes a user by username.</p>
  <pre>
    Response:
    {
      "message": "User [Username] was deleted."
    }
  </pre>

</body>
</html>